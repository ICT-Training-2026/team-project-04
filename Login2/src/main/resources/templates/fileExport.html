<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ファイル出力</title>
  <link rel="stylesheet" th:href="@{/css/somu_template.css}" />
  <link rel="stylesheet" th:href="@{/css/fileExport.css}" />
</head>
<body>
  <div class="container">
    <h2 class="title">ファイル出力画面</h2>
    <form id="exportForm" method="post" th:action="@{/export}">
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>社員番号</th>
              <th>名前</th>
              <th>所属</th>
              <th>選択</th>
            </tr>
          </thead>
          <tbody>
            <!-- ここがポイント -->
            <tr th:each="emp : ${employees}">
              <td th:text="${emp.employee_id}">社員番号</td>
              <td th:text="${emp.employee_name}">名前</td>
              <td th:text="${emp.department_name}">所属</td>
              <td><input type="checkbox" name="empIds" th:value="${emp.employee_id}" /></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="button-container">
        <div class="button-column">
          <button type="button" onclick="selectAll()">全選択</button>
          <a href="/generalMenu"><button type="button" class="back-button">戻る</button></a>
        </div>
        <div class="button-column">
          <button type="button" onclick="clearAll()">全解除</button>
          <button type="submit">出力</button>
        </div>
      </div>
    </form>
  </div>
  <script>
    function selectAll() {
      document.querySelectorAll('tbody input[type="checkbox"]').forEach(cb => cb.checked = true);
    }
    function clearAll() {
      document.querySelectorAll('tbody input[type="checkbox"]').forEach(cb => cb.checked = false);
    }
  </script>
</body>
</html>